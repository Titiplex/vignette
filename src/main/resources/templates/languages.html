<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${appName}">Languages</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="card text-border">
        <h1>Languages</h1>
    </div>

    <div class="card">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Level</th>
                    <th>Family</th>
                    <th>Parent</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="language : ${languages}">
                    <td th:text="${language.id}"></td>
                    <td th:text="${language.name}"></td>
                    <td th:text="${language.level}"></td>

                    <!-- Affiche le nom de la family (relation), fallback sur familyId -->
                    <td th:text="${language.family != null ? language.family.name : (language.familyId != null ? language.familyId : '-')}"></td>

                    <!-- Parent -->
                    <td th:text="${language.parent != null ? language.parent.name : (language.parentId != null ? language.parentId : '-')}"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="index">
        <div>
            <span th:text="'Page ' + (${page.number} + 1) + ' / ' + ${page.totalPages}"></span>
        </div>
        <div>
            <!-- First + Prev -->
            <a th:if="${page.number > 0}" th:href="@{/languages(page=0)}">« First</a>
            <a th:if="${page.hasPrevious()}" th:href="@{/languages(page=${page.number - 1})}">‹ Prev</a>

            <!-- Fenêtre de pages autour de la page courante -->
            <span th:if="${page.totalPages > 0}">
              <span th:each="p : ${#numbers.sequence(startPage, endPage)}" style="margin:0 4px;">
                <a th:if="${p != page.number}" th:href="@{/languages(page=${p})}" th:text="${p + 1}"></a>
                <strong th:if="${p == page.number}" th:text="${p + 1}"></strong>
              </span>
            </span>
            <!-- Next + Last -->
            <a th:if="${page.hasNext()}" th:href="@{/languages(page=${page.number + 1})}">Next ›</a>
            <a th:if="${page.number < page.totalPages - 1}"
               th:href="@{/languages(page=${page.totalPages - 1})}">
                Last »
            </a>
        </div>
    </div>
</body>
</html>